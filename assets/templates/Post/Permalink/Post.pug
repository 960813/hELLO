div(class=`${type} permalink`)
  header.header(role='header')
    if hasCategory
      a.category(href='[##_article_rep_category_link_##]') [##_article_rep_category_##]
    h1.title #{`[##_${type}_rep_title_##]`}
    .metainfo
      time.date #{`[##_${type}_rep_date_##]`}
      include @/templates/Post/Permalink/Metainfo/Admin
  article.content #{`[##_${type}_rep_desc_##]`}
  include @/templates/Post/Permalink/PostBtn
  if hasCategory
    include ~views/Main/Post/Permalink/Category
    include ~views/Main/Post/Permalink/Tag
  s_if_var_author
    include @/templates/Post/Permalink/Author

script.
  /**
   * Image Alignment
   *
   * @param {number} contentWidth
   */
  function alignImageBlock (contentWidth) {
    $('figure.imageblock.alignCenter, figure.imagegridblock').each(function () {
      let width = $(this).data('origin-width')
      width = width > 1100 ? 1100 : width

      $(this).css({ width, 'max-width': 'none' })

      const marginLeft = (contentWidth - width) / 2
      if (marginLeft < 0) {
        $(this).css('margin-left', marginLeft)
      }
    })
  }

  /**
   * Add Id attribute in Heading elements
   *
   * @param {string} parent
   * @param {string} selector
   */
  function wrapWithAnchor (parent, selector) {
    const $parent = $(parent)
    $parent.find(selector).each(function () {
      const $heading = $(this)
      const anchor = encodeURIComponent($heading.text())
      const $a = $('<a></a>').attr('href', '#' + anchor).text($heading.text())

      $heading.attr('id', anchor).empty().append($a)
    })
  }

script.
  alignImageBlock(670)
  wrapWithAnchor('.permalink', 'h2, h3, h4')

  hljs.initHighlightingOnLoad()

style
  :stylus
    $font-awesome = 'Font Awesome 5 Pro'
    $base-color = #ed5207
    $base-color-grey = #f8f8f8

    $color = alpha(black, .8)
    $moreLess-color = white

    #main__content
      .permalink
        color $color
        > .header
          text-align center
          .category
            font-weight 500
            color $base-color !important
            font-size .96rem
          .title
            margin-top 0
            margin-bottom 5px
            font-weight 600
            font-size 1.7rem
            line-height 1.5em
          .metainfo
            font-size .9rem
            color alpha(black, .5)
            span
              display inline-block
              padding 0 3px
        .content
          text-align left
          margin-top 40px
          .another_category
            a
              text-decoration none !important
          figure[data-ke-type='opengraph'],
          div[data-ke-type=moreLess],
          blockquote, ul, ol, table,
          h2, h3, h4
            margin 20px 0
            > a
              color #333
              text-decoration none !important
          p
            margin 0 !important
          figure[data-ke-type='opengraph']
            margin-top 10px !important
          div[data-ke-type=moreLess]
            position relative
            .moreless-content
              margin-top 25px
            > .btn-toggle-moreless
              display inline-block
              border-radius 16px
              background-color black
              padding 2px 14px
              color $moreLess-color !important
              font-size .85rem !important
              font-weight 600
              &::before
                font-family $font-awesome
                content '\f0a9'
                margin-right 5px
                color $moreLess-color
            &.open
              > .btn-toggle-moreless::before
                  content '\f0ab'
            &::before
              z-index -1
              content ''
              position absolute
              top 15px
              left 0
              height 0
              width 100%
              border-bottom 1px dashed alpha(black, .1)
          blockquote
            font-style initial
            &[data-ke-style=style1]
              text-align: center
              font-size 1.1rem
              &::before
                font-family $font-awesome
                content '\f10e'
                font-weight 600
                display block
                margin-bottom 3px
              p
                color black
            &[data-ke-style=style2]
              border solid #acacac
              border-width 0 0 0 2px
              padding 1px 0 0 12px
              color #666
              line-height 1.8em
              text-align left
              font-size .9rem
            &[data-ke-style=style3]
              font-size 1rem
              background none
          ul, ol
            padding-left 20px
            li
              margin 6px 0
          ul li
            list-style circle
            line-height 1.8em
          table, td, th
            border none
            border-bottom 1px solid alpha(black, .1)
          table
            td, th
              font-size .9rem
              padding 16px 12px
              box-sizing border-box
          h2, h3, h4
            font-weight 600
            line-height 1.8em
          h2
            font-size 1.5rem
          h3
            font-size 1.3rem
          h4
            font-size 1.1rem
          p, span
            line-height 1.8em
            letter-spacing .8px
            > code
              position relative
              top -1px
              color $base-color
              padding 2px 8px
              background $base-color-grey
              border-radius 5px
              white-space normal
          b, strong
            color alpha(black, .9)
            font-size 1rem
            font-weight 500
          pre
            border none
            padding 0
            code
              background-color $base-color-grey
              border-radius 5px
              padding 15px
          img
            border-radius 5px
          a
            color $base-color
            text-decoration underline !important
        @media screen and (max-width: 1200px)
          #header
            .title
              font-size 1.7rem
          .content
            h2
              font-size 1.3rem
            h3
              font-size 1.2rem
            h4
              font-size 1rem
            .imageblock
              &.alignCenter
                width 100% !important
                margin 0 !important
            blockquote[data-ke-style=style1]::before
              font-size .85rem
